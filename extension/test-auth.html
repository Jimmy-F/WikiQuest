<!DOCTYPE html>
<html>
<head>
  <title>Test Auth Storage</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      padding: 40px;
      max-width: 600px;
      margin: 0 auto;
    }
    button {
      padding: 10px 20px;
      margin: 10px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
    }
    .set { background: #4fc3f7; color: white; }
    .check { background: #81c784; color: white; }
    .clear { background: #e57373; color: white; }
    #result {
      margin-top: 20px;
      padding: 20px;
      background: #f5f5f5;
      border-radius: 8px;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <h1>WikiQuest Auth Storage Test</h1>

  <button class="set" onclick="setAuth()">Set Test User ID</button>
  <button class="check" onclick="checkAuth()">Check Storage</button>
  <button class="clear" onclick="clearAuth()">Clear Storage</button>

  <div id="result">Click a button to test...</div>

  <script>
    async function setAuth() {
      const testUserId = 'test-user-' + Date.now();
      await chrome.storage.sync.set({ wq_userId: testUserId });
      document.getElementById('result').innerHTML =
        `‚úÖ Set wq_userId to: <strong>${testUserId}</strong>`;
    }

    async function checkAuth() {
      const result = await chrome.storage.sync.get(['wq_userId']);
      document.getElementById('result').innerHTML =
        result.wq_userId
          ? `‚úÖ Found wq_userId: <strong>${result.wq_userId}</strong>`
          : '‚ùå No wq_userId found in storage';
    }

    async function clearAuth() {
      await chrome.storage.sync.remove('wq_userId');
      document.getElementById('result').innerHTML =
        'üóëÔ∏è Cleared wq_userId from storage';
    }

    // Check on load
    checkAuth();
  </script>
</body>
</html>